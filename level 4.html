<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Waste Management Game - Level 2</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        
    }
    #game-container {
        width: 1500px; /* Adjust width as needed */
        height: 600px; /* Adjust height as needed */
        background-image: url('environment.jpg'); /* Replace 'environment.jpg' with your environment image */
        background-size: cover;
        position: relative;
        
    }
    /* Style for the player image */
    .player-img {
        width: 80px; /* Adjust player size as needed */
        height: 110px; /* Adjust player size as needed */
        position: absolute;
    }
    .waste-object {
        width: 50px; /* Adjust waste object size as needed */
        height: 50px; /* Adjust waste object size as needed */
        /* Remove background-color and add background-image */
        background-image: url('l1glass1.jpg'); /* Default waste image */
        background-size: cover;
        position: absolute;
    }
    /* Style for destination images */
    .destination-img {
        width: 120px; /* Adjust destination size as needed */
        height: 140px; /* Adjust destination size as needed */
        position: absolute;
    }
</style>
</head>
<body>

<div id="game-container">
    <!-- Player image replaced here -->
    <img src="Images/man.jpg" alt="Player" class="player-img" id="player">
    <!-- Destination images replaced here -->
    <img src="Images/l1recycl.png" alt="Recyclable Destination" class="destination-img" id="destination1" style="top: 100px; left: 100px;">
    <img src="Images/l1nonrecycl.png" alt="Non-Recyclable Destination" class="destination-img" id="destination2" style="top: 300px; left: 500px;">
    <!-- Add more destination points as needed -->
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const player = document.getElementById('player');
    let playerX = 0;
    let playerY = 0;
    let heldObject = null;
    let wasteObjects = [];

    // Define destination points
    const destinations = [
        { x: 100, y: 100 },
        { x: 500, y: 300 }
        // Add more destination points as needed
    ];

    // Generate random waste objects
    generateWasteObjects();

    // Set initial player position
    setPosition(player, playerX, playerY);

    // Event listener for keyboard input
    document.addEventListener('keydown', function(event) {
        const key = event.key;
        const speed = 10; // Adjust player movement speed as needed

        // Move player based on arrow keys
        switch (key) {
            case 'ArrowUp':
                playerY -= speed;
                break;
            case 'ArrowDown':
                playerY += speed;
                break;
            case 'ArrowLeft':
                playerX -= speed;
                break;
            case 'ArrowRight':
                playerX += speed;
                break;
            case 'Enter':
                if (heldObject !== null) {
                    if (checkDestinationCollision(player)) {
                        heldObject.remove(); // Remove the waste object from the environment
                        heldObject = null;
                    }
                } else {
                    heldObject = checkWasteObjectCollision(player);
                    if (heldObject !== null) {
                        heldObject.style.left = '0'; // Adjust held object position relative to the player
                        heldObject.style.top = '0'; // Adjust held object position relative to the player
                        player.appendChild(heldObject); // Attach the held object to the player
                    }
                }
                break;
        }

        // Update player position
        setPosition(player, playerX, playerY);
    });

    // Function to set element position
    function setPosition(element, x, y) {
        element.style.left = x + 'px';
        element.style.top = y + 'px';
    }

    // Function to generate random waste objects
    function generateWasteObjects() {
        const numObjects = 15; // Adjust the number of waste objects as needed
        const container = document.getElementById('game-container');
        const wasteImages = ['l1glass1.jpg', 'l1plastic bottle.jpg', 'l1polystyrene stock.jpg', 'papper.jpg', 'plastic_bottle.jpg', 'plasticbag.jpg', 'Food waste.jpg', 'Plastic medical waste.jpg'];

        for (let i = 0; i < numObjects; i++) {
            const randomX = Math.floor(Math.random() * container.offsetWidth);
            const randomY = Math.floor(Math.random() * container.offsetHeight);
            const wasteObject = document.createElement('div');
            wasteObject.className = 'waste-object';
            const randomImage = wasteImages[Math.floor(Math.random() * wasteImages.length)];
            wasteObject.style.backgroundImage = `url('${randomImage}')`;
            wasteObject.style.left = randomX + 'px';
            wasteObject.style.top = randomY + 'px';
            if (!checkWasteOverlap(wasteObject)) {
                container.appendChild(wasteObject);
                wasteObjects.push(wasteObject);
            }
        }
    }

    // Function to check collision with destination points
    function checkDestinationCollision(player) {
        const playerRect = player.getBoundingClientRect();
        for (const destination of destinations) {
            const destinationRect = {
                top: destination.y,
                bottom: destination.y + 50, // Adjust destination size as needed
                left: destination.x,
                right: destination.x + 50 // Adjust destination size as needed
            };
            if (
                playerRect.top < destinationRect.bottom &&
                playerRect.bottom > destinationRect.top &&
                playerRect.left < destinationRect.right &&
                playerRect.right > destinationRect.left
            ) {
                // Player collided with destination point
                console.log('Player reached destination');
                return true;
            }
        }
        return false;
    }

    // Function to check collision with waste objects
    function checkWasteObjectCollision(player) {
        const playerRect = player.getBoundingClientRect();
        for (let i = 0; i < wasteObjects.length; i++) {
            const wasteObject = wasteObjects[i];
            const wasteRect = wasteObject.getBoundingClientRect();
            if (
                playerRect.top < wasteRect.bottom &&
                playerRect.bottom > wasteRect.top &&
                playerRect.left < wasteRect.right &&
                playerRect.right > wasteRect.left
            ) {
                // Player collided with waste object
                console.log('Player picked up waste object');
                wasteObjects.splice(i, 1); // Remove the waste object from the array
                return wasteObject;
            }
        }
        return null;
    }

    // Function to check if the new waste object overlaps with existing ones
    function checkWasteOverlap(newWasteObject) {
        const newWasteRect = newWasteObject.getBoundingClientRect();
        for (const wasteObject of wasteObjects) {
            const wasteRect = wasteObject.getBoundingClientRect();
            if (
                newWasteRect.top < wasteRect.bottom &&
                newWasteRect.bottom > wasteRect.top &&
                newWasteRect.left < wasteRect.right &&
                newWasteRect.right > wasteRect.left
            ) {
                // Overlap detected
                return true;
            }
        }
        return false;
    }
});
</script>

</body>
</html>
