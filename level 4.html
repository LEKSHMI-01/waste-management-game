<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Waste Management Game - Level 2</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
    }
    #game-container {
        width: 800px; /* Adjust width as needed */
        height: 600px; /* Adjust height as needed */
        background-image: url('environment.jpg'); /* Replace 'environment.jpg' with your environment image */
        background-size: cover;
        position: relative;
    }
    .player {
        width: 50px; /* Adjust player size as needed */
        height: 50px; /* Adjust player size as needed */
        background-color: red; /* Player color */
        position: absolute;
    }
    .waste-object {
        width: 30px; /* Adjust waste object size as needed */
        height: 30px; /* Adjust waste object size as needed */
        background-color: yellow; /* Waste object color */
        position: absolute;
    }
    .destination {
        width: 50px; /* Adjust destination size as needed */
        height: 50px; /* Adjust destination size as needed */
        background-color: green; /* Destination color */
        position: absolute;
    }
</style>
</head>
<body>

<div id="game-container">
    <div class="player" id="player"></div>
    <div class="destination" id="destination1" style="top: 100px; left: 100px;"></div>
    <div class="destination" id="destination2" style="top: 300px; left: 500px;"></div>
    <!-- Add more destination points as needed -->
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const player = document.getElementById('player');
    let playerX = 0;
    let playerY = 0;
    let heldObject = null;

    // Define destination points
    const destinations = [
        { x: 100, y: 100 },
        { x: 500, y: 300 }
        // Add more destination points as needed
    ];

    // Generate random waste objects
    generateWasteObjects();

    // Set initial player position
    setPosition(player, playerX, playerY);

    // Event listener for keyboard input
    document.addEventListener('keydown', function(event) {
        const key = event.key;
        const speed = 10; // Adjust player movement speed as needed

        // Move player based on arrow keys
        switch (key) {
            case 'ArrowUp':
                playerY -= speed;
                break;
            case 'ArrowDown':
                playerY += speed;
                break;
            case 'ArrowLeft':
                playerX -= speed;
                break;
            case 'ArrowRight':
                playerX += speed;
                break;
            case 'Enter':
                if (heldObject !== null) {
                    if (checkDestinationCollision(player)) {
                        heldObject.remove(); // Remove the waste object from the environment
                        heldObject = null;
                    }
                } else {
                    heldObject = checkWasteObjectCollision(player);
                    if (heldObject !== null) {
                        heldObject.style.left = '0'; // Adjust held object position relative to the player
                        heldObject.style.top = '0'; // Adjust held object position relative to the player
                        player.appendChild(heldObject); // Attach the held object to the player
                    }
                }
                break;
        }

        // Update player position
        setPosition(player, playerX, playerY);
    });

    // Function to set element position
    function setPosition(element, x, y) {
        element.style.left = x + 'px';
        element.style.top = y + 'px';
    }

    // Function to generate random waste objects
    function generateWasteObjects() {
        const numObjects = 10; // Adjust the number of waste objects as needed
        const container = document.getElementById('game-container');
        for (let i = 0; i < numObjects; i++) {
            const randomX = Math.floor(Math.random() * container.offsetWidth);
            const randomY = Math.floor(Math.random() * container.offsetHeight);
            const wasteObject = document.createElement('div');
            wasteObject.className = 'waste-object';
            wasteObject.style.left = randomX + 'px';
            wasteObject.style.top = randomY + 'px';
            container.appendChild(wasteObject);
        }
    }

    // Function to check collision with destination points
    function checkDestinationCollision(player) {
        const playerRect = player.getBoundingClientRect();
        for (const destination of destinations) {
            const destinationRect = {
                top: destination.y,
                bottom: destination.y + 50, // Adjust destination size as needed
                left: destination.x,
                right: destination.x + 50 // Adjust destination size as needed
            };
            if (
                playerRect.top < destinationRect.bottom &&
                playerRect.bottom > destinationRect.top &&
                playerRect.left < destinationRect.right &&
                playerRect.right > destinationRect.left
            ) {
                // Player collided with destination point
                console.log('Player reached destination');
                return true;
            }
        }
        return false;
    }

    // Function to check collision with waste objects
    function checkWasteObjectCollision(player) {
        const playerRect = player.getBoundingClientRect();
        const wasteObjects = document.querySelectorAll('.waste-object');
        for (const wasteObject of wasteObjects) {
            const wasteRect = wasteObject.getBoundingClientRect();
            if (
                playerRect.top < wasteRect.bottom &&
                playerRect.bottom > wasteRect.top &&
                playerRect.left < wasteRect.right &&
                playerRect.right > wasteRect.left
            ) {
                // Player collided with waste object
                console.log('Player picked up waste object');
                return wasteObject;
            }
        }
        return null;
    }
});
</script>

</body>
</html>
